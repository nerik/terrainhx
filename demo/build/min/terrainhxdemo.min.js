!function(){"use strict";function e(e,r){if(null==r)return null;null==r.__id__&&(r.__id__=h++);var t;return null==e.hx__closures__?e.hx__closures__={}:t=e.hx__closures__[r.__id__],null==t&&(t=function(){return t.method.apply(t.scope,arguments)},t.scope=e,t.method=r,e.hx__closures__[r.__id__]=t),t}var r=function(){this.w=t.Browser.window.innerWidth,this.halfW=0|this.w/2,this.h=t.Browser.window.innerHeight,this.zoom=30,this.cx=0,this.scene=new THREE.Scene,this.sun=new THREE.PointLight(16777215,1,0),this.sun.position.set(10,50,130),this.scene.add(this.sun),this.camera=new THREE.PerspectiveCamera(70,this.w/this.h,1,1e3),this.camera.position.z=40,this.camera.position.y=10,this.scene.add(this.camera),this.colladaMeshContainer=new THREE.Object3D,this.scene.add(this.colladaMeshContainer),this.projector=new THREE.Projector,this.renderer=new THREE.WebGLRenderer({antialias:!0,stencil:!0}),this.renderer.setSize(this.w,this.h),t.Browser.document.body.appendChild(this.renderer.domElement);var r=new THREE.ColladaLoader;r.load("gomera/gomera.dae",e(this,this.onColladaLoaded))};r.main=function(){new r},r.prototype={onMouseWheel:function(e){this.zoom+=e.wheelDelta/100},onMouseMove:function(e){this.cx=e.x,this.cy=e.y},update:function(){console.log("update"),t.Browser.window.requestAnimationFrame(e(this,this.update));var r=1-this.cy/this.h,h=Math.PI/4*r+Math.PI/16;this.zoom=THREE.Math.clamp(this.zoom,10,80),this.camera.position.z=Math.cos(h)*this.zoom,this.camera.position.y=Math.sin(h)*this.zoom,this.camera.lookAt(new THREE.Vector3(0,0,0));var n=-(this.cx-this.halfW)/5e4;this.colladaMeshContainer.rotation.y+=n;for(var a=0,i=this.markers.length;i>a;){var o=a++;this.markers[o].rotation.y+=.05}return this.renderer.render(this.scene,this.camera,null,null),!0},start:function(){t.Browser.document.onmousemove=e(this,this.onMouseMove),t.Browser.document.onmousewheel=e(this,this.onMouseWheel),this.update(0)},onColladaLoaded:function(e){console.log("loadsfded"),this.colladaMesh=e.scene,this.colladaMesh.scale.y=3;var r=this.colladaMesh.getChildByName("gomera-mesh");r.material=new THREE.MeshLambertMaterial({shading:1,color:16744264});var t=r.geometry.boundingBox,h=new THREE.PlaneGeometry(t.max.x,-t.min.z),n=new THREE.Mesh(h,new THREE.MeshLambertMaterial({shading:1,color:6458879,opacity:.8,transparent:!0}));n.rotation.x=-Math.PI/2,n.position.y=.01,this.colladaMeshContainer.add(n),this.colladaMesh.position.x=-t.max.x/2,this.colladaMesh.position.z=-t.min.z/2,this.colladaMeshContainer.add(this.colladaMesh),this.markers=new Array;for(var a=this.colladaMesh.getChildByName("markers").children,i=0,o=a.length;o>i;){var s=i++,l=a[s],c=new THREE.Geometry;c.vertices.push(new THREE.Vector3(0,0,0)),c.vertices.push(new THREE.Vector3(-.5,.5,0)),c.vertices.push(new THREE.Vector3(.5,.5,0)),c.faces.push(new THREE.Face3(0,1,2)),c.faces.push(new THREE.Face3(0,2,1)),c.computeBoundingSphere();var T=new THREE.Mesh(c,new THREE.MeshLambertMaterial({shading:1,color:16711935}));T.position.y=1.4,l.add(T),this.markers.push(T)}var d=new THREE.AxisHelper(50);d.position=this.colladaMeshContainer.position,this.colladaMeshContainer.add(d),this.start()}};var t={};t.Browser=function(){},t.three={},t.three.Face=function(){},t.three.Mapping=function(){},t.three.Renderer=function(){},t.three.Three=function(){},t.three.Three.requestAnimationFrame=function(e){return t.Browser.window.requestAnimationFrame(e)},t.three.Three.cancelAnimationFrame=function(){t.Browser.window.cancelAnimationFrame(id)};var h=0;Math.__name__=["Math"],Math.NaN=Number.NaN,Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY,Math.isFinite=function(e){return isFinite(e)},Math.isNaN=function(e){return isNaN(e)},t.Browser.window="undefined"!=typeof window?window:null,t.Browser.document="undefined"!=typeof window?window.document:null,t.three.Three.CullFaceNone=0,t.three.Three.CullFaceBack=1,t.three.Three.CullFaceFront=2,t.three.Three.CullFaceFrontBack=3,t.three.Three.FrontFaceDirectionCW=0,t.three.Three.FrontFaceDirectionCCW=1,t.three.Three.BasicShadowMap=0,t.three.Three.PCFShadowMap=1,t.three.Three.PCFSoftShadowMap=2,t.three.Three.FrontSide=0,t.three.Three.BackSide=1,t.three.Three.DoubleSide=2,t.three.Three.NoShading=0,t.three.Three.FlatShading=1,t.three.Three.SmoothShading=2,t.three.Three.NoColors=0,t.three.Three.FaceColors=1,t.three.Three.VertexColors=2,t.three.Three.NoBlending=0,t.three.Three.NormalBlending=1,t.three.Three.AdditiveBlending=2,t.three.Three.SubtractiveBlending=3,t.three.Three.MultiplyBlending=4,t.three.Three.CustomBlending=5,t.three.Three.AddEquation=100,t.three.Three.SubtractEquation=101,t.three.Three.ReverseSubtractEquation=102,t.three.Three.ZeroFactor=200,t.three.Three.OneFactor=201,t.three.Three.SrcColorFactor=202,t.three.Three.OneMinusSrcColorFactor=203,t.three.Three.SrcAlphaFactor=204,t.three.Three.OneMinusSrcAlphaFactor=205,t.three.Three.DstAlphaFactor=206,t.three.Three.OneMinusDstAlphaFactor=207,t.three.Three.DstColorFactor=208,t.three.Three.OneMinusDstColorFactor=209,t.three.Three.SrcAlphaSaturateFactor=210,t.three.Three.MultiplyOperation=0,t.three.Three.MixOperation=1,t.three.Three.AddOperation=2,t.three.Three.RepeatWrapping=1e3,t.three.Three.ClampToEdgeWrapping=1001,t.three.Three.MirroredRepeatWrapping=1002,t.three.Three.NearestFilter=1003,t.three.Three.NearestMipMapNearestFilter=1004,t.three.Three.NearestMipMapLinearFilter=1005,t.three.Three.LinearFilter=1006,t.three.Three.LinearMipMapNearestFilter=1007,t.three.Three.LinearMipMapLinearFilter=1008,t.three.Three.UnsignedByteType=1009,t.three.Three.ByteType=1010,t.three.Three.ShortType=1011,t.three.Three.UnsignedShortType=1012,t.three.Three.IntType=1013,t.three.Three.UnsignedIntType=1014,t.three.Three.FloatType=1015,t.three.Three.UnsignedShort4444Type=1016,t.three.Three.UnsignedShort5551Type=1017,t.three.Three.UnsignedShort565Type=1018,t.three.Three.AlphaFormat=1019,t.three.Three.RGBFormat=1020,t.three.Three.RGBAFormat=1021,t.three.Three.LuminanceFormat=1022,t.three.Three.LuminanceAlphaFormat=1023,t.three.Three.RGB_S3TC_DXT1_Format=2001,t.three.Three.RGBA_S3TC_DXT1_Format=2002,t.three.Three.RGBA_S3TC_DXT3_Format=2003,t.three.Three.RGBA_S3TC_DXT5_Format=2004,t.three.Three.LineStrip=0,t.three.Three.LinePieces=1,r.main()}();